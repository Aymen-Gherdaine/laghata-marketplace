"use strict";(self.webpackChunklaghata_frontend=self.webpackChunklaghata_frontend||[]).push([[876],{3876:(n,e,i)=>{i.r(e),i.d(e,{default:()=>Y});var t,r,a,o,s,d,l,p,c,x,u,h,m,g,f,b,w,v=i(168),j=i(2791),y=i(1933),P=i(8789),Z=i(7689),_=i(3101),C=i(6742),k=(i(7577),i(2315)),S=i(8179),E=i(184);const T=P.ZP.div(t||(t=(0,v.Z)(["\n  min-height: 100vh;\n  padding-bottom: 150px;\n  position: relative;\n\n  .spinner {\n    margin-top: 10rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n"]))),A=P.ZP.div(r||(r=(0,v.Z)(["\n  border: 1px solid;\n  width: fit-content;\n  padding: 10px;\n  border-radius: 5px;\n  background: #f5f0ed;\n  margin: 20px auto 0 auto;\n  font-weight: 500;\n"]))),R=P.ZP.div(a||(a=(0,v.Z)(["\n  width: 70%;\n  max-width: 1300px;\n  display: flex;\n  gap: 3rem;\n  align-items: flex-start;\n  justify-content: center;\n  margin: 2.5rem auto 0 auto;\n  padding: 5px 10px;\n\n  @media screen and (max-width: 1200px) {\n    flex-direction: column;\n    gap: 1rem;\n    width: 100%;\n    align-items: center;\n  }\n"]))),z=P.ZP.div(o||(o=(0,v.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 150px;\n  gap: 1.5rem;\n  margin: 30px 0 40px 50px;\n\n  @media screen and (max-width: 700px) {\n    width: 80%;\n    margin: 30px auto;\n  }\n"]))),O=P.ZP.h2(s||(s=(0,v.Z)(["\n  font-size: 30px;\n  font-weight: 500;\n  text-transform: capitalize;\n"]))),L=P.ZP.p(d||(d=(0,v.Z)(["\n  font-size: 20px;\n"]))),D=P.ZP.img(l||(l=(0,v.Z)(["\n  border-radius: 50%;\n  margin-top: 30px;\n  width: 190px;\n  height: 190px;\n  object-fit: cover;\n\n  @media screen and (max-width: 700px) {\n    width: 130px;\n    height: 130px;\n  }\n"]))),N=P.ZP.div(p||(p=(0,v.Z)(["\n  border-radius: 10px;\n  border: 1px solid;\n  height: fit-content;\n  margin-bottom: 15px;\n  margin-top: 25px;\n  display: flex;\n  align-items: center;\n  box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;\n  flex-direction: column;\n  gap: 1.5rem;\n  width: 80%;\n\n  form {\n    width: 80%;\n    margin: 0 auto;\n  }\n\n  .spinnerPicture,\n  .spinner {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .spinnerPicture {\n    margin-top: 20px;\n  }\n\n  .disabledBtn {\n    padding: 12px 15px;\n    border: 1px solid white;\n    border-radius: 25px;\n    font-size: 18px;\n    transition: all 0.7s ease-in-out;\n    margin: 25px 0;\n    width: 100%;\n    color: black;\n  }\n\n  @media screen and (min-width: 700px) {\n    max-width: 400px;\n  }\n"]))),U=P.ZP.h3(c||(c=(0,v.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 15px 0;\n  font-size: 30px;\n  margin: 20px 0;\n"]))),B=P.ZP.div(x||(x=(0,v.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 1.5rem;\n"]))),I=P.ZP.input(u||(u=(0,v.Z)(["\n  padding: 12px 10px;\n  border-radius: 10px;\n  outline: none;\n  font-size: 17px;\n  border: 1px solid black;\n"]))),V=P.ZP.button(h||(h=(0,v.Z)(["\n  padding: 12px 15px;\n  color: white;\n  background: black;\n  border: 1px solid white;\n  border-radius: 25px;\n  font-size: 18px;\n  transition: all 0.7s ease-in-out;\n  margin: 25px 0;\n  width: 100%;\n  cursor: pointer;\n\n  :hover {\n    background: transparent;\n    color: black;\n    border: 1px solid black;\n  }\n\n  .spinner {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n"]))),q=P.ZP.input(m||(m=(0,v.Z)(["\n  height: 0.1px;\n  opacity: 0;\n  overflow: hidden;\n  position: absolute;\n  z-index: -1;\n"]))),F=P.ZP.label(g||(g=(0,v.Z)(["\n  font-size: 1.25em;\n  font-weight: 500;\n  color: black;\n  border: 1px solid;\n  background-color: transparent;\n  padding: 10px 15px;\n  display: inline-block;\n  cursor: pointer;\n  border-radius: 25px;\n  transition: all 0.5s ease-in-out;\n\n  :hover {\n    background-color: black;\n    color: white;\n  }\n"]))),H=P.ZP.span(f||(f=(0,v.Z)(["\n  color: #cc0000;\n  padding-left: 10px;\n"]))),K=P.ZP.div(b||(b=(0,v.Z)(["\n  width: 100%;\n  margin-top: 15px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  .spinner {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: 1px solid;\n  }\n"]))),W=P.ZP.img(w||(w=(0,v.Z)(["\n  height: 90px;\n  width: 90px;\n  object-fit: cover;\n  border-radius: 50%;\n"]))),Y=()=>{const[n,e]=(0,j.useState)(!1),[i,t]=(0,j.useState)({username:"",password:"",confirmPassword:"",email:"",picture:""}),[r,a]=(0,j.useState)(!1),[o,s]=(0,j.useState)(!1),d=(0,Z.s0)(),{user:l}=(0,j.useContext)(S.E),{data:p}=(0,y.useQuery)(["userEmail",null===l||void 0===l?void 0:l._id],(()=>(0,C.mr)(null===l||void 0===l?void 0:l._id)),{staleTime:5e3,enabled:!(null===l||void 0===l||!l._id)}),c=n=>{t((e=>({...e,[n.target.name]:n.target.value})))};return(0,E.jsxs)(T,{children:[!(null!==l&&void 0!==l&&l.isVerified)&&(0,E.jsx)(A,{children:"You need to verify your email before making any changes"}),l&&p?(0,E.jsxs)(R,{children:[(0,E.jsxs)(z,{children:[l.picture?(0,E.jsx)(D,{src:l.picture,alt:"profile"}):(0,E.jsx)(D,{src:k,alt:"User profile picture"}),(0,E.jsxs)("div",{children:[(0,E.jsx)(O,{children:null===l||void 0===l?void 0:l.username}),(0,E.jsx)(L,{children:p})]})]}),(0,E.jsx)(N,{children:(0,E.jsxs)("form",{onSubmit:n=>{n.preventDefault(),e(!0);try{if(i.password.toLowerCase()!==i.confirmPassword.toLowerCase())return a(!0),void e(!1);{const n={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(i)};(async()=>{if(null!==l&&void 0!==l&&l._id){const r=await fetch("".concat("http://3.98.131.146","/api/user/").concat(null===l||void 0===l?void 0:l._id),n),a=await r.json();var i;if(a)localStorage.setItem("token",null===a||void 0===a||null===(i=a.data)||void 0===i?void 0:i.token),t({username:"",password:"",confirmPassword:"",email:"",picture:""}),e(!1),d("/")}})()}}catch(r){console.log(r.stack),e(!1)}},children:[(0,E.jsx)(U,{children:"Update Info:"}),(0,E.jsxs)(B,{children:[(0,E.jsx)(I,{type:"text",name:"username",placeholder:"Username",onChange:c,required:!0}),(0,E.jsx)(I,{type:"password",name:"password",placeholder:"Password",onChange:c,required:!0}),(0,E.jsx)(I,{type:"password",name:"confirmPassword",placeholder:"Confirm Password",onChange:c,required:!0}),r&&(0,E.jsx)(H,{children:"Please check that your passwords match"}),(0,E.jsx)(I,{type:"email",name:"email",placeholder:"Email",onChange:c,required:!0}),(0,E.jsx)(q,{type:"file",name:"file",id:"file",className:"inputfile",accept:"/image/*",onChange:n=>{(async n=>{if(s(!0),"image/jpeg"===n.type||"image/png"===n.type){const r=new FormData;r.append("file",n),r.append("upload_preset","laghata-app"),r.append("cloud_name","laghata");try{const n=await fetch("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"http://3.98.131.146",REACT_APP_SERVER_PORT:"9000"}.REACT_APP_CLOUDINARY_url),{method:"POST",body:r}),e=await n.json();t({...i,picture:e.secure_url.toString()}),s(!1)}catch(e){console.log(e.stack),s(!1)}}else s(!1)})(n.target.files[0])}}),(0,E.jsx)(F,{htmlFor:"file",children:"Choose a picture"})]}),o?(0,E.jsx)(_.p2,{height:"30",width:"30",color:"#54cbe3",ariaLabel:"circles-loading",wrapperClass:"spinnerPicture",visible:!0}):i.picture&&(0,E.jsx)(K,{children:(0,E.jsx)(W,{src:i.picture,alt:"profile Picture"})}),null!==l&&void 0!==l&&l.isVerified?(0,E.jsx)(V,{type:"submit",children:n?(0,E.jsx)(_.p2,{height:"30",width:"30",color:"#54cbe3",ariaLabel:"circles-loading",wrapperClass:"spinner",visible:!0}):"Submit"}):(0,E.jsx)("button",{disabled:null===l||void 0===l?void 0:l.isVerified,className:"disabledBtn",children:"Submit"})]})})]}):(0,E.jsx)(_.p2,{height:"35",width:"35",color:"#010101",ariaLabel:"circles-loading",wrapperClass:"spinner",visible:!0})]})}}}]);
//# sourceMappingURL=876.f2c964bb.chunk.js.map