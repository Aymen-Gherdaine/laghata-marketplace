"use strict";(self.webpackChunklaghata_frontend=self.webpackChunklaghata_frontend||[]).push([[982],{5982:(n,e,t)=>{t.r(e),t.d(e,{default:()=>M});var a,i,s,o,c,d,r,l,p,x=t(168),h=t(2791),g=t(7689),f=t(783),u=t(8789),j=t(4448),y=t(4067),m=t(1951),b=t(3101),k=t(9040),w=t(184);const D=u.ZP.div(a||(a=(0,x.Z)(["\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 220px;\n"]))),Z=u.ZP.div(i||(i=(0,x.Z)([""]))),v=u.ZP.div(s||(s=(0,x.Z)(["\n  display: flex;\n  max-width: 600px;\n  margin: 20px auto;\n  align-items: flex-start;\n  justify-content: center;\n  gap: 20px;\n\n  @media screen and (max-width: 700px) {\n    flex-direction: column;\n    gap: 20px;\n  }\n"]))),P=u.ZP.div(o||(o=(0,x.Z)(["\n  height: 160px;\n  position: relative;\n\n  h2 {\n    position: absolute;\n    top: 50px;\n    left: 20px;\n    font-size: 35px;\n    font-weight: 900;\n    text-transform: capitalize;\n    color: #242526;\n  }\n"]))),C=u.ZP.img(c||(c=(0,x.Z)(["\n  height: 160px;\n  width: 100%;\n  object-fit: cover;\n  opacity: 0.7;\n"]))),S=u.ZP.div(d||(d=(0,x.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n"]))),I=u.ZP.div(r||(r=(0,x.Z)(["\n  border: 1px solid;\n\n  background-color: #f5f0ed;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n\n  gap: 20px;\n\n  span {\n    font-weight: 500;\n    padding-right: 5px;\n  }\n"]))),B=u.ZP.div(l||(l=(0,x.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),z=u.ZP.button(p||(p=(0,x.Z)(["\n  padding: 10px 25px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  width: 60%;\n\n  background: transparent;\n  border: 1px solid;\n  transition: background 0.5s ease-in-out;\n\n  :hover {\n    background-color: #dadce1;\n  }\n\n  @media screen and (max-width: 700px) {\n    padding: 10px 35px;\n  }\n\n  .spinner {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n"]))),M=()=>{const[n,e]=(0,h.useState)(!1),[t,a]=(0,h.useState)(),[i,s]=(0,h.useState)(),{id:o}=(0,g.UO)(),{dateRange:c,setDateRange:d,bookingLoading:r,setBookingLoading:l}=(0,h.useContext)(y.z);let p=(0,g.s0)();(0,h.useEffect)((()=>{try{e(!0);(async()=>{const n=await fetch("".concat("http://3.98.131.146","/api/listings/listing/").concat(o)),t=await n.json(),i=await fetch("".concat("http://3.98.131.146","/api/user/").concat(t.data.renterId)),c=await i.json();t.data&&c.data?(a(t.data),s(c.data),e(!1)):e(!1)})()}catch(n){console.log(n.stack),e(!1)}}),[o]);const x=(c[0].endDate-c[0].startDate)/864e5;return(0,w.jsx)(D,{children:n?(0,w.jsx)(j.Z,{}):(0,w.jsx)(w.Fragment,{children:t&&i&&!n&&(0,w.jsxs)(Z,{children:[(0,w.jsxs)(P,{children:[(0,w.jsx)(C,{src:f,alt:"banner"}),(0,w.jsxs)("h2",{children:["Book ",t.name," From ",i.username]})]}),(0,w.jsx)(v,{children:(0,w.jsxs)(S,{children:[(0,w.jsx)("h3",{children:"Booking Details"}),(0,w.jsxs)(I,{children:[(0,w.jsxs)("p",{children:[(0,w.jsx)("span",{children:"Price Per Day: "}),"$",t.price]}),(0,w.jsxs)("p",{children:[(0,w.jsx)("span",{children:"Booking Date: "}),"".concat((0,m.default)(c[0].startDate,"MM/dd/yyyy")," to ").concat((0,m.default)(c[0].endDate,"MM/dd/yyyy"))," ",1===x?(0,w.jsxs)("span",{children:["(",x,"/Day)"]}):(0,w.jsxs)("span",{children:["(",x,"/Days)"]})]}),(0,w.jsx)("p",{children:(0,w.jsxs)("span",{children:["Total Price: $",Number(t.price)*x]})}),(0,w.jsx)(B,{children:(0,w.jsx)(z,{onClick:async()=>{l(!0);try{const n={listingId:t._id,renterId:t.renterId,clientId:JSON.parse(localStorage.getItem("id")),bookingDate:[{startDate:c[0].startDate,endDate:c[0].endDate}],location:t.location},e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};(await fetch("".concat("http://3.98.131.146","/api/listing/reservation"),e)).ok&&(l(!1),d([{startDate:new Date,endDate:(0,k.default)(new Date,1),key:"selection"}]),p("/listing/".concat(o)))}catch(n){console.log(n.stack),l(!1)}l(!1)},children:r?(0,w.jsx)(b.p2,{height:"20",width:"20",color:"#54cbe3",ariaLabel:"circles-loading",wrapperClass:"spinner",visible:!0}):"Confirm Booking"})})]})]})})]})})})}}}]);
//# sourceMappingURL=982.5d036a8f.chunk.js.map